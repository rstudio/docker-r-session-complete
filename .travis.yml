dist: trusty
language: generic

notifications:
  email: false

env:
  global:
    - secure: "Rh/rekqMoEn0c3cSf4JFi8gxIJbBxvGA4itvBCZxathzMlzv2v5dZr2VVasdu1SKHvmd830seu1uGuwEMAR45l16xYWT+Vzsm22dGRDcu6Euo7HLrg/BwN0Jf6cQ4E3fEFIjGgT0223XwST5YGRjIv1pec8A6wAgxmSA0LWIuZG3pqw0dSTPgWk0YbL3dLnrCm6Q8jJkdTu1dYMYad3vLd6bSVZsEri2J+c6zp933CTeAektUO16B2XMjgvg3G1cO/CtOmu/IAxV/hRnV1FJqL0JoymR/OU79Xqv6n/gDYaUGCQZqG/pgKfAPsXfyfT4yalCcPipymBXAhobfahYaMIDuzMPde3t1m7h2OnboGRjQJiHlfpK+J7ZMQyeTf3UTYR0NuDXtoWpZm2d5yW148XGjSxLudb5I3tjqboEXQi/zuuIbSTzrxWjobYmNPtHSw8dA/DFPEcUDhYWdVn3ERIyx7pY5TrWQ0OfFTX+vz0nZXj3Re925NZic6felY1udut0c9hd92lEs79UAk11x6/Mb5b4RV/vsuOSiTdoimA9UGY5ec07HYP5cHQtexwwu6otfUgUGGGp8ExYg6/Pskv5+lrd+p6iQuOPKsPyu3pTT80fpmup4GRqkFi9/hj6fKCIxfCn9Zxo4+gA1ybTaYBaHgm285rw0Li8ZYA3Ea0="  # DOCKER_USERNAME
    - secure: "UFk2c3haQPpyUd42gmeZTIUp2CD9D/RxrQsExBdpU9UErQyj2Wsc4WXCNu6mdaqXhDz22LYtH+3arzRkpY2ZuKHO27vMKLQwQT0WZjZNqZr2FAmx2DMp2gAMD83bCACO9IrHojDXA+k22gopL1XIkhTa+wIuGKGvP/YPxTC1EVT3+56O2b1H6TXQo466JYV0E9artpXvwrwoDVvIX0s0NkRdfJFIKFgg0/Kd4O8QyPBfINVEiyBUGi2RIzHJ2ldtPBijEam+BsadlCrbe+f2uP+JHnCvhMKiO6hu9Kx0ME+hC4mBPHXciEPm4iZsfQkV1R6IHIXmE/P42U0T6U8XUvDSid6iUGTbshqAtvN33RfBGwLP9uV2y+X2WqI6E1SpW6x8WLBfqd6ndffRuAaoICaJS6jPC7YSGYEEwE+dR3dwtJXbzLq2HAcHHVYj9AFKWfGtm13T9YtvnzsB78zq0DtJbxeOOMxdwx4gOVcrDu0DRGpiU9eZqhIDGkRkDznB/ozvnkgNAs66urLgjeSwlw/+PjlykDp86GV52ODAiJEsvXFpGkJUr0gGpPUcQ5p4JPYAlktkrwH4vvQJ+eFUHJP5h1FUUcGfLMF557JqwOoYPOdFfvNm5Sux3fTpjR9EUA0jAhcKS8Npj6fLioI3JBik1RzqtRNQY+j/9VhZMCE="  # DOCKER_PASSWORD
  matrix:
    - DISTRO=centos7
    - DISTRO=bionic

script: bash scripts/docker-build.sh

deploy:
  provider: script
  script: bash scripts/docker-tag-and-push.sh
  on:
    tags: true
